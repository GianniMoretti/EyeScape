<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home</title>
    <link rel="icon" href="../../../Assets/Logo/LittleFishes.png" type="image/icon type">

    <link rel="stylesheet" href="../css/Home.css" type="text/css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@500&display=swap" rel="stylesheet">
    <link href='https://fonts.googleapis.com/css?family=Cabin+Condensed:700' rel='stylesheet' type='text/css'>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.5/dist/umd/popper.min.js"
            integrity="sha384-Xe+8cL9oJa6tN/veChSP7q+mnSPaj5Bcu9mPX5F5xIGE0DVittaqT5lorf0EI7Vk"
            crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.min.js"
            integrity="sha384-ODmDIVzN+pFdexxHEHFBQH3/9/vQ9uori45z4JjnFsRydbmQbmL5t1tQ0culUzyK"
            crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-A3rJD856KowSb7dwlZdYEkO39Gagi7vIsF0jrRAoQmDKKtQBHUuLZ9AsSv4jD4Xa"
            crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.9.1/font/bootstrap-icons.css">
</head>


<body>
<nav class="navbar " style="background-color: #131d47;">
    <div class="container-fluid">
        <a class="navbar-brand mx-auto" href="#">
            <img src="../../../Assets/Logo/Logo-completoTransparent.png" alt="" class="img-fluid" width="330"
                 height="60" style="padding-left: 30%"/>
        </a>
        <a class="navbar-brand">
            <div style="align-content: center">
                <label class="fs-1" id="afterWelcome"></label>
                <button type="button" class="btn btn-outline-light" id="Logout"><i class="bi bi-box-arrow-right"></i>
                    Logout
                </button>
            </div>
        </a>
    </div>
</nav>

<div class="container text-center" style="margin-top: 10px; padding-bottom: 50px">
    <div class="row justify-content-md-center">

        <div class="WelcomeWrite" height=30
             style=" width: 500px;">
            <svg viewbox="0 0 100 20">
                <defs>
                    <linearGradient id="gradient" x1="0" x2="0" y1="0" y2="1">
                        <stop offset="5%" stop-color="#131D47"/>
                        <stop offset="95%" stop-color="#9AECED"/>
                    </linearGradient>
                    <pattern id="wave" x="0" y="0" width="120" height="20" patternUnits="userSpaceOnUse">
                        <path id="wavePath"
                              d="M-40 9 Q-30 7 -20 9 T0 9 T20 9 T40 9 T60 9 T80 9 T100 9 T120 9 V20 H-40z"
                              mask="url(#mask)" fill="url(#gradient)">
                            <animateTransform
                                    attributeName="transform"
                                    begin="0s"
                                    dur="2.5s"
                                    type="translate"
                                    from="0,0"
                                    to="40,0"
                                    repeatCount="indefinite"/>
                        </path>
                    </pattern>
                </defs>
                <text text-anchor="middle" x="50" y="15" font-size="20" fill="url(#wave)" fill-opacity="0.9">
                    WELCOME
                </text>
                <text text-anchor="middle" x="50" y="15" font-size="20" fill="url(#gradient)" fill-opacity="0.7">
                    WELCOME
                </text>
            </svg>
        </div>

        <div class="col-md-12 box">
            <div class="container text-center" style="font-weight: bold; font-size:30px;">
                <div class="row" style="margin-top: 7%; margin-bottom: 8%">
                    <div class="col-md-4">
                        <div style="padding: 10px">
                            <div class="card-wrap">
                                <div class="form-check form-switch">
                                    <input typeSwitch="filtri" class="form-check-input switch-j" type="checkbox"
                                           role="switch"
                                           id="flexSwitchCheckChecked1" checked>
                                    <label class="form-check-label" for="flexSwitchCheckChecked1"><i
                                            class="bi bi-funnel-fill"></i>Filtri</label>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4 ">
                        <div style="padding: 10px">
                            <div class="card-wrap">
                                <div class="form-check form-switch">
                                    <input typeSwitch="areatori" class="form-check-input switch-j" type="checkbox"
                                           role="switch"
                                           id="flexSwitchCheckChecked2" checked>
                                    <label class="form-check-label" for="flexSwitchCheckChecked2"><i
                                            class="bi bi-fan"></i>Areatori</label>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4 ">
                        <div style="padding: 10px">
                            <div class="card-wrap">
                                <div class="form-check form-switch">
                                    <input typeSwitch="riscaldatori" class="form-check-input switch-j" type="checkbox"
                                           role="switch"
                                           id="flexSwitchCheckChecked3" checked>
                                    <label class="form-check-label" for="flexSwitchCheckChecked3"><i
                                            class="bi bi-thermometer-half"></i>Riscaldatori</label>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="col-md-6 offset-md-3">
                        <div style="padding: 10px">
                            <div class="card-wrap">

                                    <p> Pompa di riempimento
                                        <label id="pompa" style="padding-left: 50px">
                                        </label>
                                    </p>

                            </div>
                        </div>
                    </div>
                </div>
                <hr class="border border-dark border-2 opacity-75 " style="border-radius: 50%; width: 100%; ">
            </div>


            <p class="text-center" style="color: black; font-size: 30px; font-weight: bold">I miei acquari</p>

            <div class="container text-center" style="padding-bottom: 30px">
                <div class="row">
                    <div class="col-md-6">
                        <button type='button' class='btn btn-primary buttonAquarium' id="aquarium1" pos="1"
                                style="color: #131D47; border-radius: 35px; border : #131D47 solid 4px; background-color: #9AECED; font-size: 30px;">
                            <i class="bi bi-plus-circle" style=" width:50px; height: 50px;"></i></button>
                    </div>
                    <div class="col-md-6">
                        <button type='button' class='btn btn-primary buttonAquarium' id="aquarium2" pos="2"
                                style="color: #131D47; border-radius: 35px; border : #131D47 solid 4px; background-color: #9AECED; font-size:30px;">
                            <i class="bi bi-plus-circle"></i></button>
                    </div>
                    <div class="col-md-6">
                        <button type='button' class='btn btn-primary buttonAquarium' id="aquarium3" pos="3"
                                style="color: #131D47; border-radius: 35px; border : #131D47 solid 4px; background-color: #9AECED; font-size: 30px;">
                            <i class="bi bi-plus-circle"></i></button>
                    </div>
                    <div class="col-md-6">
                        <button type='button' class='btn btn-primary buttonAquarium' id="aquarium4" pos="4"
                                style="color: #131D47; border-radius: 35px; border : #131D47 solid 4px; background-color: #9AECED; font-size: 30px;">
                            <i class="bi bi-plus-circle"></i></button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<footer>
    <div class="footer-blurp">
        <div class="containers">
            <div class="footer-blur-item">
                <img src="../../../Assets/Logo/LittleFishesTransparent.png" class="circle-image"/>
                <h3>
                    Matteo Tinacci
                </h3>
                <p>
                    Studente ingegneria Informatica
                </p>
            </div>
        </div>
    </div>
    <div class="footer-blurp">
        <div class="containers">
            <div class="footer-blur-item">
                <img src="../../../Assets/Logo/LittleFishesTransparent.png" class="circle-image"/>
                <h3>
                    Leonardo Pampaloni
                </h3>
                <p>
                    Studente ingegneria Informatica
                </p>
            </div>
        </div>
    </div>
    <div class="footer-blurp">
        <div class="containers">
            <div class="footer-blur-item">
                <img src="../../../Assets/Logo/LittleFishesTransparent.png" class="circle-image"/>
                <h3>
                    Gianni Moretti
                </h3>
                <p>
                    Studente ingegneria Informatica
                </p>
            </div>
        </div>
    </div>
</footer>


</body>
</html>
<style>
    body {
        background-image: url("../../../Assets/Image/LoginWallpaper.png");
        background-repeat: no-repeat;
        background-attachment: fixed;
        background-size: cover;
        background-color: #f2f2f2;
    }

    .card-wrap {
        border-radius: 15px;
        background-color: #ffffff;
        box-shadow: 0px 16px 24px rgb(51, 56, 61, 0.4);
        height: 100%;
        padding: 20px;
    }
</style>
<script type="text/javascript">
    $(document).ready(function () {
        $.ajax({
            type: "POST",
            url: "../Server/Php/Actions.php",
            data: {"action": "load"},
            dataType: 'JSON',
            success: function (response) {
                var element;
                for (let i = 0; i < response["id"].length; i++) {
                    element = $("#aquarium" + (i + 1));
                    element.html(response["names"][i]);
                    document.getElementById("aquarium" + (i + 1)).setAttribute("aquaID", response["id"][i]);
                    document.getElementById("aquarium" + (i + 1)).classList.add("full");
                }
                $("#afterWelcome").html("<p style=\"color: white; font-size: large; padding-right: 5px\">" + response["user"] + "</p>");
            },
            error: function () {
                console.log("è vuoto");
            }
        });
        $.ajax({
            type: "POST",
            url: "../Server/Php/Actions.php",
            data: {"action": "deviceload"},
            dataType: 'JSON',
            success: function (response) {
                var element;
                if (response["status"][0] == 'off') {
                    element = document.getElementById("flexSwitchCheckChecked1");
                    element.checked = false;
                } else {
                    element = document.getElementById("flexSwitchCheckChecked1");
                    element.checked = true;
                }
                if (response["status"][2] == 'off') {
                    element = document.getElementById("flexSwitchCheckChecked2");
                    element.checked = false;
                } else {
                    element = document.getElementById("flexSwitchCheckChecked2");
                    element.checked = true;
                }
                if (response["status"][1] == 'off') {
                    element = document.getElementById("flexSwitchCheckChecked3");
                    element.checked = false;
                } else {
                    element = document.getElementById("flexSwitchCheckChecked3");
                    element.checked = true;
                }
                if (response["status"][3] == 'off') {
                    element = document.getElementById("pompa");
                    element.innerHTML = '<i className="bi bi-circle-fill"></i>';
                } else {
                    element = document.getElementById("pompa");
                    element.innerHTML = '<i className="bi bi-circle-fill"></i>';

                }
            }
        });
        $(".buttonAquarium").on("click", function (event) {
            if (this.classList.contains("full")) {
                localStorage.setItem("currentID", this.getAttribute("aquaID"));
                window.location.href = "Aquarium.html";
            } else {
                this.classList.add("full");
                localStorage.setItem("pos", this.getAttribute("pos"))
                window.location.href = "AquFirstPage.html";
            }
        });

        $(".switch-j").on("click", function (event) {
            var ty = this.getAttribute("typeSwitch");
            var onff = this.checked;

            var id;
            var status;

            if (ty == "filtri") {
                id = 1;
            } else if (ty == "areatori") {
                id = 3;
            } else id = 2;

            if (onff) {
                status = "on";
            } else status = "off";

            $.ajax({
                type: "POST",
                url: "../Server/Php/Actions.php",
                data: {"action": "deviceupdate", "status": status, "id": id},
                dataType: 'JSON',
                success: function (response) {
                }
            });
        });

    });
</script>

<script>
    $('#Logout').on("click", function (event) {

            $.ajax({
                type: "POST",
                url: "../Server/Php/Actions.php",
                data: {"action": "logout"},
                dataType: 'JSON',
                success: function (response) {
                    window.location.href = "Login.html"
                }
            })
        }
    );

</script>